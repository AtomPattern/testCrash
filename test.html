from http.server import HTTPServer, BaseHTTPRequestHandler

class TestHandler(BaseHTTPRequestHandler):
    def do_GET(self):
        if self.path.startswith('/test'):
            self.send_response(200)
            self.send_header('Content-type', 'text/html')
            self.end_headers()
            
            html = """
<!DOCTYPE html>
<html>
<head>
    <title>Alert Test</title>
</head>
<body>
    <script>
    (function() {
        // 创建很长的弹窗文本
        const text = 'x'.repeat(10000);
        
        while(true) {
            try {
                // 混合使用三种弹窗
                alert(text);
                confirm(text);
                prompt(text);
            } catch(e) {
                // 忽略错误继续循环
                continue;
            }
        }
    })();
    </script>
</body>
</html>
            """
            self.wfile.write(html.encode())
        else:
            self.send_error(404)

# 启动服务器
server_address = ('', 8000)
httpd = HTTPServer(server_address, TestHandler)
print('[+] Server running on port 8000')
httpd.serve_forever()
